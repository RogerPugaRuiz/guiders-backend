# =======================================================
# CONFIGURACIÓN ESPECÍFICA PARA TESTS E2E
# =======================================================

# Configuración general
PORT=3001
DEBUG=False
NODE_ENV=test

# Configuración de PostgreSQL para TESTS
DATABASE_HOST=localhost
DATABASE_PORT=5432
DATABASE_USERNAME=postgres
DATABASE_PASSWORD=postgres
DATABASE=guiders

# Base de datos de prueba PostgreSQL
TEST_DATABASE_HOST=localhost
TEST_DATABASE_PORT=5433
TEST_DATABASE_USERNAME=postgres
TEST_DATABASE_PASSWORD=postgres
TEST_DATABASE=guiders_test

# Configuración de MongoDB para TESTS
MONGODB_HOST=localhost
MONGODB_PORT=27017
MONGODB_ROOT_USERNAME=admin
MONGODB_ROOT_PASSWORD=password
MONGODB_DATABASE=guiders

# MongoDB para pruebas (sin autenticación)
TEST_MONGODB_HOST=localhost
TEST_MONGODB_PORT=27018
TEST_MONGODB_DATABASE=guiders_test

# Configuración de Redis para TESTS
REDIS_PORT=6379
REDIS_URL=redis://localhost:6379

# Claves de encriptación (usar valores de test seguros)
ENCRYPTION_KEY=0f0dd60415efd0a1d5c4409ed92fc1df3e4cfc517c4d3ad7d1e1d828f45f2bd4
GLOBAL_TOKEN_SECRET=test_global_token_secret_here
ACCESS_TOKEN_EXPIRATION=24h
REFRESH_TOKEN_EXPIRATION=30d

# Email (usar configuración de test)
RESEND_API_KEY=test_key
EMAIL_FROM=test@guiders.com

# URLs de aplicación
APP_URL=http://localhost:3001
JWKS_BASE_URL=http://localhost:3001

# =======================================================
# KEYCLOAK - CONFIGURACIÓN PARA TESTS
# =======================================================
KEYCLOAK_PORT=8080
KEYCLOAK_ADMIN_USERNAME=admin
KEYCLOAK_ADMIN_PASSWORD=admin123
KEYCLOAK_LOG_LEVEL=ERROR

# Base de datos Keycloak
KEYCLOAK_DB_PORT=5434
KEYCLOAK_DB_USERNAME=keycloak
KEYCLOAK_DB_PASSWORD=keycloak
KEYCLOAK_DB_NAME=keycloak

# JWT Keycloak
KEYCLOAK_ISSUER=http://localhost:8080/realms/guiders
KEYCLOAK_JWKS_URI=http://localhost:8080/realms/guiders/protocol/openid-connect/certs
KEYCLOAK_AUDIENCE=account

# =======================================================
# BFF - CONFIGURACIÓN PARA TESTS
# =======================================================
OIDC_ISSUER=http://localhost:8080/realms/guiders

# Cliente Console
OIDC_CONSOLE_CLIENT_ID=console
OIDC_CONSOLE_REDIRECT_URI=http://localhost:3001/api/bff/auth/callback/console

# Cliente Admin
OIDC_ADMIN_CLIENT_ID=admin
OIDC_ADMIN_REDIRECT_URI=http://localhost:3001/api/bff/auth/callback/admin

# Configuración de cookies para tests
SAMESITE=lax
COOKIE_SECURE=false
COOKIE_PATH=/
REFRESH_PATH=/api/bff/auth/refresh
ALLOW_RETURN_TO=http://localhost:4200,http://localhost:4201

# Nombres de cookies
SESSION_COOKIE_CONSOLE=console_session_test
REFRESH_COOKIE_CONSOLE=console_refresh_test
SESSION_COOKIE_ADMIN=admin_session_test
REFRESH_COOKIE_ADMIN=admin_refresh_test

# =======================================================
# CORS - CONFIGURACIÓN PARA TESTS
# =======================================================
CORS_ALLOWED_ORIGINS=http://localhost:4200,http://localhost:4201,http://127.0.0.1:8083,http://localhost:8083
CORS_DEBUG=false

# =======================================================
# CONFIGURACIÓN KEYCLOAK ADICIONAL
# =======================================================
KEYCLOAK_URL=http://localhost:8080
KEYCLOAK_REALM=guiders
KEYCLOAK_CLIENT_ID=console