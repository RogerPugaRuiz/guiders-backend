---
title: GetChatById Endpoint Class Diagram (2025-05-22)
---
%% Diagrama de clases Mermaid para el endpoint getChatById en el contexto de conversations/chat

classDiagram
    direction LR
    class ChatController {
        +getChatById(chatId: string): ChatResponseDto
    }
    class QueryBus {
        +execute(query): Result
    }
    class FindOneChatByIdQuery {
        +chatId: string
    }
    class FindOneChatByIdQueryHandler {
        +execute(query: FindOneChatByIdQuery): Result<{chat: ChatPrimitives}, ChatNotFoundError>
    }
    class ChatRepository {
        +findOne(criteria): Optional<Chat>
    }
    class Chat {
        +toPrimitives(): ChatPrimitives
    }
    class ChatPrimitives {
        +id: string
        +participants: ParticipantPrimitives[]
        +status: string
        +lastMessage: string | null
        +lastMessageAt: Date | null
        +createdAt: Date
    }
    class ChatResponseDto {
        +id: string
        +participants: ParticipantPrimitives[]
        +status: string
        +lastMessage: string | null
        +lastMessageAt: Date | null
        +createdAt: Date
    }
    class ChatNotFoundError

    ChatController --> QueryBus : usa
    ChatController --> ChatResponseDto : retorna
    QueryBus --> FindOneChatByIdQuery : ejecuta
    FindOneChatByIdQuery --> FindOneChatByIdQueryHandler : maneja
    FindOneChatByIdQueryHandler --> ChatRepository : consulta
    ChatRepository --> Chat : retorna
    Chat --> ChatPrimitives : serializa
    FindOneChatByIdQueryHandler --> ChatNotFoundError : error
    ChatPrimitives --> ChatResponseDto : mapea
